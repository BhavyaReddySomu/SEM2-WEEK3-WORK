CREATE TABLE STUDENTS (
	STUDENTID INT PRIMARY KEY,
	FIRSTNAME VARCHAR(100),
	LASTNAME VARCHAR(100),
	MAJOR VARCHAR(100)
);

CREATE TABLE COURSES (
	COURSEID INT PRIMARY KEY,
	COURSENAME VARCHAR(100)
);

CREATE TABLE ENROLLMENTS (
	STUDENTID INT,
	COURSEID INT,
	PRIMARY KEY (STUDENTID, COURSEID),
	FOREIGN KEY (STUDENTID) REFERENCES STUDENTS(STUDENTID),
	FOREIGN KEY (COURSEID) REFERENCES COURSES(COURSEID)
);

-- INSERT STUDENTS
INSERT INTO STUDENTS (STUDENTID, FIRSTNAME, LASTNAME, MAJOR)
VALUES
(1, 'JOHN', 'JACK', 'CS'),
(2, 'SAI', 'SRUTHI', 'MATH'),
(3, 'BHAVYA', 'HONEY', 'CS');


SELECT S.FIRSTNAME, S.LASTNAME
FROM STUDENTS S
JOIN ENROLLMENTS E ON S.STUDENTID = E.STUDENTID
WHERE E.COURSEID = 1;
  
UPDATE STUDENTS
SET MAJOR = 'IT'
WHERE STUDENTID = 1;

DELETE FROM STUDENTS
WHERE STUDENTID IN (SELECT STUDENTID FROM ENROLLMENTS WHERE COURSEID = 2);

SELECT S.FIRSTNAME, S.LASTNAME
FROM STUDENTS S
JOIN ENROLLMENTS E ON S.STUDENTID = E.STUDENTID
WHERE E.COURSEID = 1;

SELECT S.FIRSTNAME, S.LASTNAME
FROM STUDENTS S
JOIN ENROLLMENTS E ON S.STUDENTID = E.STUDENTID
WHERE E.COURSEID = 1 AND E.COURSEID = 2;

SELECT S.FIRSTNAME, S.LASTNAME
FROM STUDENTS S
ORDER BY S.LASTNAME ASC;

SELECT COUNT(*)
FROM STUDENTS;

SELECT S.MAJOR, AVG(E.COURSEID)
FROM STUDENTS S
JOIN ENROLLMENTS E ON S.STUDENTID = E.STUDENTID
GROUP BY S.MAJOR;


